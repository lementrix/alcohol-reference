---
import products from "../../data/products";
import "../../styles/main.css";

const { slug } = Astro.params;
const BASE = import.meta.env.BASE_URL;

const product = products.find(p => p.slug === slug);

if (!product) {
  throw new Error(`Product not found: ${slug}`);
}

const categoryClass = `category category-${product.category}`;


<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{product.name}</title>
  </head>
  <body>
    <div class="container">
      <a class="back-link" href={`${BASE}`}>‚Üê Powr√≥t</a>

      <div class="card">
        <div class="product-header">
          <img
            src={`${BASE}${product.image}`}
            alt={product.name}
            class="product-image"
          />

          <div>
            <span class={categoryClass}>
              {product.category}
            </span>

            <h1 class="product-title">{product.name}</h1>
            <div class="product-subtitle">{product.subtitle}</div>

            <ul class="product-meta">
              <li><strong>Kategoria:</strong> {product.category}</li>
              <li><strong>Kraj:</strong> {product.country}</li>
              <li><strong>ABV:</strong> {product.abv}</li>
              {product.maturation && (
                <li>
                  <strong>Dojrzewanie:</strong> {product.maturation}
                </li>
              )}
            </ul>
          </div>
        </div>

        {product.whenToOffer && product.whenToOffer.length > 0 && (
          <section class="section">
            <h2>Dla kogo</h2>
            <ul>
              {product.whenToOffer.map(item => (
                <li>{item}</li>
              ))}
            </ul>
          </section>
        )}

        {product.howToPresent && (
          <section class="section">
            <h2>Jak prezentowaƒá</h2>
            <p>{product.howToPresent}</p>
          </section>
        )}

        {/* üÜï COCKTAILS SECTION */}
        {product.cocktails && product.cocktails.length > 0 && (
          <section class="section">
            <h2>W jakich drinkach mo≈ºna u≈ºyƒá</h2>
            <ul>
              {product.cocktails.map(drink => (
                <li>{drink}</li>
              ))}
            </ul>
          </section>
        )}

        {product.alternatives && product.alternatives.length > 0 && (
          <section class="section">
            <h2>S≈Çu≈ºy alternatywƒÖ do</h2>
            <ul>
              {product.alternatives.map(alt => (
                <li>{alt}</li>
              ))}
            </ul>
          </section>
        )}
      </div>

      <div class="spacer"></div>
    </div>
  </body>
</html>